(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,s){},167:function(e,t,s){},168:function(e,t,s){},192:function(e,t,s){var a={"./ar.json":193,"./be.json":194,"./cs.json":195,"./de.json":196,"./en.json":197,"./es.json":198,"./fa.json":199,"./fi.json":200,"./fr.json":201,"./hi.json":202,"./it.json":203,"./ja.json":204,"./kr.json":205,"./nl.json":206,"./pl.json":207,"./pt.json":208,"./ru.json":209,"./sa.json":210,"./tr.json":211,"./uk.json":212,"./vi.json":213,"./zh.json":214};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id=192},237:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s(30),n=s.n(i),o=(s(167),s(168),s(13)),r=s(263),c=(s(107),s(73)),l=s(262),d=s(264),j=s(284),h=s(256),b=s(267),u=s(261),p=s(268),x=s(150),O=s(260);const g=(e,t,s,a)=>s<e.length-1&&e[s+1].sender._id===t.sender._id&&e[s].sender._id!==a?33:s<e.length-1&&e[s+1].sender._id!==t.sender._id&&e[s].sender._id!==a||s===e.length-1&&e[s].sender._id!==a?0:"auto",m=(e,t,s,a)=>s<e.length-1&&(e[s+1].sender._id!==t.sender._id||void 0===e[s+1].sender._id)&&e[s].sender._id!==a,f=(e,t,s)=>t===e.length-1&&e[e.length-1].sender._id!==s&&e[e.length-1].sender._id,v=(e,t,s)=>s>0&&e[s-1].sender._id===t.sender._id,C=(e,t)=>{var s;return(null===(s=t[0])||void 0===s?void 0:s._id)===(null===e||void 0===e?void 0:e._id)?t[1].name:t[0].name},y=(e,t)=>{var s;return(null===(s=t[0])||void 0===s?void 0:s._id)===(null===e||void 0===e?void 0:e._id)?t[1].pic:t[0].pic},S=(e,t)=>t[0]._id===e._id?t[1]:t[0],w=e=>{const t=new Date,s=new Date(e),a=t-s,i=Math.floor(a/1e3),n=Math.floor(i/60),o=Math.floor(n/60),r=Math.floor(o/24);if(Math.floor(r/30)>=1){const e=["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()];return"".concat(e," ").concat(s.getFullYear())}return r>1?"".concat(r," days ago"):1===r?"Yesterday":o>=1?"".concat(o," hours ago"):n>=1?"".concat(n," minutes ago"):"Just now"},_=e=>{const t=new Date(e),s=t.getHours(),a=t.getMinutes(),i=s>=12?"pm":"am";return"".concat(s%12||12,":").concat(a<10?"0":"").concat(a," ").concat(i)},A=e=>{const t=new Date(e),s=new Date,a=new Date(s);a.setDate(s.getDate()-1);const i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear(),o=Math.floor((s-t)/864e5);if(n(t,s))return"Today";if(n(t,a))return"Yesterday";if(o<7&&t<s)return i[t.getDay()];{const e=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear().toString().slice(-2);return"".concat(e,"/").concat(s,"/").concat(a)}};var k=s(11),F=s.n(k),z=s(270),I=s(271),E=s(288),L=s(136),R=s(1);const W=Object(a.createContext)(),N=()=>Object(a.useContext)(W);var P=e=>{let{children:t}=e;const[s,i]=Object(a.useState)(),[n,r]=Object(a.useState)(),[c,l]=Object(a.useState)([]),[d,j]=Object(a.useState)(),h=Object(o.e)();return Object(a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("userInfo"));r(e),e?h.push("/chats"):h.push("/login")}),[h]),Object(R.jsx)(W.Provider,{value:{selectedChat:s,setSelectedChat:i,user:n,setUser:r,notification:c,setNotification:l,chats:d,setChats:j},children:t})},D=s(41);var M=e=>{let{user:t,children:s}=e;const{isOpen:a,onOpen:i,onClose:n}=Object(h.a)();return Object(R.jsxs)(R.Fragment,{children:[s?Object(R.jsx)("span",{onClick:i,children:s}):"",Object(R.jsxs)(D.a,{onClose:n,isOpen:a,size:"md",children:[Object(R.jsx)(D.h,{}),Object(R.jsx)(D.d,{children:Object(R.jsx)(D.b,{children:Object(R.jsx)(O.a,{src:t,alt:"Profile Image",style:{margin:"0",padding:"0",display:"block",width:"100%"}})})})]})]})};var U=e=>{let{messages:t}=e;const{user:s}=N();return Object(R.jsx)(L.a,{style:{overflowY:"auto",height:"400px"},children:t.length>0?t.map(((e,a)=>{const i=0===a||A(t[a-1].createdAt)!==A(e.createdAt);return Object(R.jsxs)("div",{children:[i&&Object(R.jsx)(R.Fragment,{children:Object(R.jsx)("div",{style:{display:"block",textAlign:"center",color:"gray",fontSize:"10px",margin:"10px 0"},children:A(e.createdAt)})}),Object(R.jsxs)("div",{style:{display:"flex"},children:[(m(t,e,a,s._id)||f(t,a,s._id))&&Object(R.jsx)(E.a,{label:e.sender.name,placement:"bottom-start",hasArrow:!0,children:Object(R.jsx)(u.a,{mt:"7px",mr:1,size:"sm",cursor:"pointer",name:e.sender.name,src:e.sender.pic})}),e.isPic?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("span",{style:{marginLeft:g(t,e,a,s._id),marginTop:v(t,e,a,s._id)?3:10,maxWidth:"100%",cursor:"pointer"},children:Object(R.jsx)(M,{user:e.pic,children:Object(R.jsx)(O.a,{boxSize:"md",borderRadius:"20px",src:e.pic,alt:"Send Image",width:"300px",height:"300px",margin:"0",padding:"0",display:"block"})})}),Object(R.jsx)(l.a,{fontSize:"xs",color:"gray.500",alignSelf:"flex-end",children:_(e.createdAt)})]}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("span",{style:{backgroundColor:"".concat(e.sender._id===s._id?"#BEE3F8":"#B9F5D0"),marginLeft:g(t,e,a,s._id),marginTop:v(t,e,a,s._id)?3:10,borderRadius:"20px",padding:"5px 15px",maxWidth:"75%"},children:e.content}),Object(R.jsx)(l.a,{fontSize:"xs",color:"gray.500",alignSelf:"flex-end",children:_(e.createdAt)})]})]})]},e._id)})):Object(R.jsxs)(r.a,{p:"40",bgGradient:"linear-gradient(to right, white,#e8e8e8 )",borderRadius:"md",boxShadow:"md",color:"gray",width:"100%",height:"100%",textAlign:"center",children:[Object(R.jsxs)(d.a,{justifyContent:"center",children:[Object(R.jsx)(O.a,{src:"Favicon.png",alt:"ChatApp Logo",boxSize:"150px",mb:4}),Object(R.jsx)(l.a,{fontSize:"4xl",fontWeight:"extrabold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"ChatApp"})]}),Object(R.jsx)(r.a,{mt:4,colorScheme:"teal",size:"sm",children:"Hello there! \ud83d\udc4b Welcome to our chat platform. We're excited to chat with you!"}),Object(R.jsx)(l.a,{mt:4,children:"Let's have an amazing conversation. Start by saying hello!"})]})})},B=s(142),T=s(143),Y=s.n(T),G=s(269),q=s(292),J=s(266),H=s(265);var K=e=>{let{user:t,handleFunction:s,admin:a}=e;return Object(R.jsxs)(H.a,{px:2,py:1,borderRadius:"lg",m:1,mb:2,variant:"solid",fontSize:12,colorScheme:"purple",cursor:"pointer",onClick:s,children:[t.name,a===t._id&&Object(R.jsx)("span",{children:" (Admin)"}),Object(R.jsx)(J.a,{pl:1})]})};var $=e=>{let{user:t,handleFunction:s}=e;return Object(R.jsxs)(r.a,{onClick:s,cursor:"pointer",bg:"#E8E8E8",_hover:{background:"#38B2AC",color:"white"},w:"100%",d:"flex",alignItems:"center",color:"black",px:3,py:2,mb:2,borderRadius:"lg",children:[Object(R.jsx)(u.a,{mr:2,size:"sm",cursor:"pointer",name:t.name,src:t.pic}),Object(R.jsxs)(r.a,{children:[Object(R.jsx)(l.a,{children:t.name}),Object(R.jsxs)(l.a,{fontSize:"xs",children:[Object(R.jsx)("b",{children:"Email : "}),t.email]})]})]})};var Q=e=>{let{fetchMessages:t,fetchAgain:s,setFetchAgain:i}=e;const{isOpen:n,onOpen:o,onClose:l}=Object(h.a)(),[d,u]=Object(a.useState)(),[O,g]=Object(a.useState)(""),[m,f]=Object(a.useState)([]),[v,C]=Object(a.useState)(!1),[y,S]=Object(a.useState)(!1),w=Object(j.a)(),{selectedChat:_,setSelectedChat:A,user:k}=N(),z=async e=>{if(_.users.find((t=>t._id===e._id)))w({title:"User Already in group!",status:"error",duration:5e3,isClosable:!0,position:"bottom"});else if(_.groupAdmin._id===k._id){try{C(!0);const t={headers:{Authorization:"Bearer ".concat(k.token)}},{data:a}=await F.a.put("/api/chat/groupadd",{chatId:_._id,userId:e._id},t);A(a),i(!s),C(!1)}catch(t){w({title:"Error Occured!",description:t.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),C(!1)}u("")}else w({title:"Only admins can add someone!",status:"error",duration:5e3,isClosable:!0,position:"bottom"})},I=async e=>{if(_.groupAdmin._id===k._id||e._id===k._id){try{C(!0);const a={headers:{Authorization:"Bearer ".concat(k.token)}},{data:n}=await F.a.put("/api/chat/groupremove",{chatId:_._id,userId:e._id},a);e._id===k._id?A():A(n),i(!s),t(),C(!1)}catch(a){w({title:"Error Occured!",description:a.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),C(!1)}u("")}else w({title:"Only admins can remove someone!",status:"error",duration:5e3,isClosable:!0,position:"bottom"})};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(b.a,{d:{base:"flex"},icon:Object(R.jsx)(G.a,{}),onClick:o}),Object(R.jsxs)(D.a,{onClose:l,isOpen:n,isCentered:!0,children:[Object(R.jsx)(D.h,{}),Object(R.jsxs)(D.d,{children:[Object(R.jsx)(D.g,{fontSize:"35px",fontFamily:"Work sans",d:"flex",justifyContent:"center",children:_.chatName}),Object(R.jsx)(D.c,{}),Object(R.jsxs)(D.b,{d:"flex",flexDir:"column",alignItems:"center",children:[Object(R.jsx)(r.a,{w:"100%",d:"flex",flexWrap:"wrap",pb:3,children:_.users.map((e=>Object(R.jsx)(K,{user:e,admin:_.groupAdmin,handleFunction:()=>I(e)},e._id)))}),Object(R.jsxs)(c.a,{d:"flex",children:[Object(R.jsx)(q.a,{placeholder:"Chat Name",mb:3,value:d,onChange:e=>u(e.target.value)}),Object(R.jsx)(x.a,{variant:"solid",colorScheme:"teal",ml:1,isLoading:y,onClick:async()=>{if(d){try{S(!0);const e={headers:{Authorization:"Bearer ".concat(k.token)}},{data:t}=await F.a.put("/api/chat/rename",{chatId:_._id,chatName:d},e);A(t),i(!s),S(!1)}catch(e){w({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),S(!1)}u("")}},children:"Update"})]}),Object(R.jsx)(c.a,{children:Object(R.jsx)(q.a,{placeholder:"Add User to group",mb:1,onChange:e=>(async e=>{if(g(e),e)try{C(!0);const e={headers:{Authorization:"Bearer ".concat(k.token)}},{data:t}=await F.a.get("/api/user?search=".concat(O),e);C(!1),f(t)}catch(t){w({title:"Error Occured!",description:"Failed to Load the Search Results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"}),C(!1)}})(e.target.value)})}),v?Object(R.jsx)(p.a,{size:"lg"}):null===m||void 0===m?void 0:m.map((e=>Object(R.jsx)($,{user:e,handleFunction:()=>z(e)},e._id)))]}),Object(R.jsx)(D.f,{children:Object(R.jsx)(x.a,{onClick:()=>I(k),colorScheme:"red",children:"Leave Group"})})]})]})]})};var V=e=>{let{isOpen:t,onClose:s,selectedImage:a,setSelectedImage:i,fileInputRef:n,sendImage:o,loading:r}=e;const c=()=>{i(null),s(),n.current&&(n.current.value="")};return Object(R.jsxs)(D.a,{isOpen:t,onClose:s,onOverlayClick:c,children:[Object(R.jsx)(D.h,{}),Object(R.jsxs)(D.d,{children:[Object(R.jsx)(D.g,{textAlign:"center",fontSize:"2xl",children:"Preview Image"}),Object(R.jsx)(D.b,{justifyContent:"center",children:a&&Object(R.jsx)(O.a,{src:URL.createObjectURL(a),alt:"Image Preview",maxH:"400px",maxW:"100%",objectFit:"contain"})}),Object(R.jsxs)(D.f,{justifyContent:"center",children:[Object(R.jsx)(x.a,{colorScheme:"blue",mr:3,onClick:o,isLoading:r,children:"Send Image"}),Object(R.jsx)(x.a,{onClick:c,children:"Close"})]})]})]})};var X,Z;var ee=e=>{let{fetchAgain:t,setFetchAgain:s}=e;const[i,n]=Object(a.useState)([]),[o,g]=Object(a.useState)(!1),[m,f]=Object(a.useState)(!1),[v,_]=Object(a.useState)(""),A=Object(j.a)(),{isOpen:k,onOpen:E,onClose:L}=Object(h.a)(),[W,P]=Object(a.useState)(null),D=Object(a.useRef)(null),{selectedChat:T,setSelectedChat:G,user:q,notification:J,setNotification:H}=N(),K=async()=>{if(T)try{const e={headers:{Authorization:"Bearer ".concat(q.token)}};g(!0);const{data:t}=await F.a.get("/api/message/".concat(T._id),e);n(t),g(!1),X.emit("join chat",T._id)}catch(e){A({title:"Error Occured!",description:"Failed to Load the Messages",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}};Object(a.useEffect)((()=>{(X=Y()("http://localhost:5000")).emit("setup",q),X.on("join chat",(()=>s(!t)));const e=()=>{X.disconnect(),s(!t)};return window.addEventListener("beforeunload",e),window.addEventListener("unload",e),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",e)}}),[]),Object(a.useEffect)((()=>{K(),Z=T}),[T]),Object(a.useEffect)((()=>{X.on("message recieved",(e=>{Z&&Z._id===e.chat._id?(s(!t),n([...i,e])):J.includes(e)||(H([e,...J]),s(!t))}))}));return Object(R.jsxs)(R.Fragment,{children:[T?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(l.a,{fontSize:{base:"28px",md:"30px"},w:"100%",fontFamily:"Work sans",d:"flex",justifyContent:{base:"space-between"},alignItems:"center",children:[Object(R.jsx)(b.a,{d:{base:"flex",md:"none"},icon:Object(R.jsx)(z.a,{}),onClick:()=>G("")}),i&&(T.isGroupChat?Object(R.jsxs)(R.Fragment,{children:[T.chatName.toUpperCase(),Object(R.jsx)(Q,{fetchMessages:K,fetchAgain:t,setFetchAgain:s})]}):Object(R.jsxs)(d.a,{align:"center",justify:"space-between",children:[Object(R.jsx)(r.a,{children:Object(R.jsx)(M,{user:y(q,T.users),children:Object(R.jsx)(u.a,{src:y(q,T.users),alt:"Profile",boxSize:10,cursor:"pointer"})})}),Object(R.jsxs)(r.a,{flex:"1",ml:4,children:[Object(R.jsx)(l.a,{fontSize:"lg",fontWeight:"bold",children:C(q,T.users)}),Object(R.jsx)(l.a,{fontSize:"sm",color:"gray.500",children:S(q,T.users).isActive?"Online":w(S(q,T.users).lastSeen)})]})]}))]}),Object(R.jsxs)(r.a,{d:"flex",flexDir:"column",justifyContent:"flex-end",p:3,bg:"#E8E8E8",w:"100%",h:"100%",borderRadius:"lg",overflowY:"hidden",children:[o?Object(R.jsx)(p.a,{size:"xl",w:20,h:20,alignSelf:"center",margin:"auto"}):Object(R.jsx)("div",{className:"messages",children:Object(R.jsx)(U,{messages:i})}),Object(R.jsx)(c.a,{onKeyDown:async e=>{if("Enter"===e.key&&v)try{const e={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(q.token)}};_("");const{data:a}=await F.a.post("/api/message",{content:v,chatId:T,isPic:!1,pic:""},e);s(!t),X.emit("new message",a),n([...i,a])}catch(a){A({title:"Error Occured!",description:"Failed to send the Message",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}},id:"first-name",isRequired:!0,mt:3,children:Object(R.jsxs)(r.a,{display:"flex",flexDirection:"row",bg:"rgba(136, 136, 136, 0.281)",borderRadius:"20px",p:"1",children:[Object(R.jsx)(x.a,{borderRadius:"full",color:"gray",mt:"1.5",ml:"2",onClick:()=>{document.getElementById("imageInput").click()},children:Object(R.jsx)(I.a,{})}),Object(R.jsx)("input",{id:"imageInput",type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:e=>{return t=e.target.files[0],P(t),void E();var t}}),Object(R.jsx)(B.a,{value:v,onChange:e=>{_(e)},cleanOnEnter:!0,placeholder:"Enter a message...",flex:"1",ml:"4",borderRadius:"full"})]})})]})]}):Object(R.jsx)(r.a,{d:"flex",alignItems:"center",justifyContent:"center",flex:"1",bgGradient:"linear-gradient(to right, white,#e8e8e8 )",width:"100%",borderRadius:"2xl",children:Object(R.jsxs)(r.a,{textAlign:"center",children:[Object(R.jsxs)(d.a,{children:[Object(R.jsx)(O.a,{src:"Favicon.png",alt:"ChatApp Logo",boxSize:"150px",mb:4}),Object(R.jsx)(l.a,{fontSize:"4xl",fontWeight:"extrabold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"ChatApp"})]}),Object(R.jsx)(l.a,{fontSize:"2xl",fontWeight:"bold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"Let's Connect and Chat!"}),Object(R.jsx)(l.a,{fontSize:"lg",color:"#363232",fontWeight:"thin",children:"Click on a user \ud83d\udc48 to Explore the world\ud83c\udf10 of conversations! \ud83d\udcac"})]})}),Object(R.jsx)(V,{isOpen:k,onClose:L,selectedImage:W,setSelectedImage:P,fileInputRef:D,sendImage:async()=>{if("image/jpeg"===(null===W||void 0===W?void 0:W.type)||"image/png"===(null===W||void 0===W?void 0:W.type)){f(!0);const a=new FormData;a.append("file",W),a.append("upload_preset","chat-app"),a.append("cloud_name","diixoyqta");const o=await fetch("https://api.cloudinary.com/v1_1/diixoyqta/image/upload",{method:"post",body:a}).then((e=>e.json())).catch((e=>{console.log(e)}));try{const e={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(q.token)}};_("");const{data:a}=await F.a.post("/api/message",{content:"Image",chatId:T,isPic:!0,pic:null===o||void 0===o?void 0:o.url},e);L(),s(!t),X.emit("new message",a),n([...i,a]),f(!1)}catch(e){A({title:"Error Occured!",description:"Failed to send the Message",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}}else A({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})},loading:m})]})};var te=e=>{let{fetchAgain:t,setFetchAgain:s}=e;const{selectedChat:a}=N();return Object(R.jsx)(r.a,{d:{base:a?"flex":"none",md:"flex"},alignItems:"center",flexDir:"column",p:3,bg:"white",w:{base:"100%",md:"68%"},borderRadius:"lg",borderWidth:"1px",children:Object(R.jsx)(ee,{fetchAgain:t,setFetchAgain:s})})},se=s(273),ae=s(293),ie=s(287);var ne=()=>{const[e,t]=Object(a.useState)(!0);return Object(a.useEffect)((()=>{const e=setTimeout((()=>{t(!1)}),2e3);return()=>clearTimeout(e)}),[]),Object(R.jsx)(R.Fragment,{children:e?Object(R.jsx)(ae.b,{children:[...Array(12)].map(((e,t)=>Object(R.jsx)(ie.a,{height:"45px"},t)))}):Object(R.jsx)(r.a,{d:"flex",alignItems:"center",justifyContent:"center",flex:"1",bgGradient:"linear-gradient(to right, white,#e8e8e8 )",width:"100%",borderRadius:"2xl",children:Object(R.jsxs)(r.a,{textAlign:"center",children:[Object(R.jsxs)(d.a,{children:[Object(R.jsx)(O.a,{src:"Favicon.png",alt:"ChatApp Logo",boxSize:"150px",mb:4}),Object(R.jsx)(l.a,{fontSize:"4xl",fontWeight:"extrabold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"ChatApp"})]}),Object(R.jsx)(l.a,{fontSize:"2xl",fontWeight:"bold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"Start Chatting Privately with Your Contact List"}),Object(R.jsx)(l.a,{fontSize:"lg",color:"#363232",fontWeight:"thin",children:"Connect with friends and have private conversations in ChatApp. Start a chat now!"})]})})})};var oe=e=>{let{children:t}=e;const{isOpen:s,onOpen:i,onClose:n}=Object(h.a)(),[o,l]=Object(a.useState)(),[d,b]=Object(a.useState)([]),[u,p]=Object(a.useState)(""),[O,g]=Object(a.useState)([]),[m,f]=Object(a.useState)(!1),v=Object(j.a)(),{user:C,chats:y,setChats:S}=N();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("span",{onClick:i,children:t}),Object(R.jsxs)(D.a,{onClose:n,isOpen:s,isCentered:!0,children:[Object(R.jsx)(D.h,{}),Object(R.jsxs)(D.d,{children:[Object(R.jsx)(D.g,{fontSize:"35px",fontFamily:"Work sans",d:"flex",justifyContent:"center",children:"Create Group Chat"}),Object(R.jsx)(D.c,{}),Object(R.jsxs)(D.b,{d:"flex",flexDir:"column",alignItems:"center",children:[Object(R.jsx)(c.a,{children:Object(R.jsx)(q.a,{placeholder:"Chat Name",mb:3,onChange:e=>l(e.target.value)})}),Object(R.jsx)(c.a,{children:Object(R.jsx)(q.a,{placeholder:"Add Users eg: John, Piyush, Jane",mb:1,onChange:e=>(async e=>{if(p(e),e)try{f(!0);const e={headers:{Authorization:"Bearer ".concat(C.token)}},{data:t}=await F.a.get("/api/user?search=".concat(u),e);f(!1),g(t)}catch(t){v({title:"Error Occured!",description:"Failed to Load the Search Results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"})}})(e.target.value)})}),Object(R.jsx)(r.a,{w:"100%",d:"flex",flexWrap:"wrap",children:d.map((e=>Object(R.jsx)(K,{user:e,handleFunction:()=>{return t=e,void b(d.filter((e=>e._id!==t._id)));var t}},e._id)))}),m?Object(R.jsx)("div",{children:"Loading..."}):null===O||void 0===O?void 0:O.slice(0,4).map((e=>Object(R.jsx)($,{user:e,handleFunction:()=>{return t=e,void(d.includes(t)?v({title:"User already added",status:"warning",duration:5e3,isClosable:!0,position:"top"}):b([...d,t]));var t}},e._id)))]}),Object(R.jsx)(D.f,{children:Object(R.jsx)(x.a,{onClick:async()=>{if(o&&d)try{const e={headers:{Authorization:"Bearer ".concat(C.token)}},{data:t}=await F.a.post("/api/chat/group",{name:o,users:JSON.stringify(d.map((e=>e._id)))},e);S([t,...y]),n(),v({title:"New Group Chat Created!",status:"success",duration:5e3,isClosable:!0,position:"bottom"})}catch(e){v({title:"Failed to Create the Chat!",description:e.response.data,status:"error",duration:5e3,isClosable:!0,position:"bottom"})}else v({title:"Please fill all the feilds",status:"warning",duration:5e3,isClosable:!0,position:"top"})},colorScheme:"blue",children:"Create Chat"})})]})]})]})};var re=e=>{let{fetchAgain:t}=e;const[s,i]=Object(a.useState)(),{selectedChat:n,setSelectedChat:o,user:c,chats:d,setChats:h,notification:b,setNotification:p}=N(),O=Object(j.a)();Object(a.useEffect)((()=>{i(JSON.parse(localStorage.getItem("userInfo"))),(async()=>{try{const e={headers:{Authorization:"Bearer ".concat(c.token)}},{data:t}=await F.a.get("/api/chat",e);h(t)}catch(e){O({title:"Error Occured!",description:"Failed to Load the chats",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"})}})()}),[t]);return Object(R.jsxs)(r.a,{d:{base:n?"none":"flex",md:"flex"},flexDir:"column",alignItems:"center",p:3,bg:"white",w:{base:"100%",md:"31%"},borderRadius:"lg",borderWidth:"1px",children:[Object(R.jsxs)(r.a,{pb:3,px:3,fontSize:{base:"28px",md:"30px"},fontFamily:"Work sans",d:"flex",w:"100%",justifyContent:"space-between",alignItems:"center",children:["My Chats",Object(R.jsx)(oe,{children:Object(R.jsx)(x.a,{d:"flex",fontSize:{base:"17px",md:"10px",lg:"17px"},rightIcon:Object(R.jsx)(se.a,{}),id:"newGroupChat",children:"New Group Chat"})})]}),Object(R.jsx)(r.a,{d:"flex",flexDir:"column",p:3,bg:"#F8F8F8",w:"100%",h:"100%",borderRadius:"lg",overflowY:"hidden",children:(null===d||void 0===d?void 0:d.length)>0?Object(R.jsx)(ae.b,{overflowY:"scroll",children:d.map((e=>Object(R.jsx)(r.a,{onClick:()=>(e=>{o(e),p((t=>t.filter((t=>t.chat._id!==e._id))))})(e),cursor:"pointer",bg:(null===n||void 0===n?void 0:n._id)===(null===e||void 0===e?void 0:e._id)?"#b4b4b4":"#E8E8E8",color:"black",px:3,py:2,borderRadius:"lg",children:Object(R.jsxs)(r.a,{display:"flex",justifyContent:"space-between",children:[Object(R.jsxs)(r.a,{display:"flex",alignItems:"center",children:[Object(R.jsx)(u.a,{mt:"7px",mr:1,size:"sm",cursor:"pointer",name:e.isGroupChat?e.chatName:C(s,e.users),src:e.isGroupChat?e.chatName:y(s,e.users)}),Object(R.jsxs)(r.a,{children:[Object(R.jsx)(l.a,{children:e.isGroupChat?e.chatName:C(s,e.users)}),e.latestMessage&&Object(R.jsxs)(l.a,{fontSize:"xs",children:[Object(R.jsxs)("b",{children:[e.latestMessage.sender.name," : "]}),e.latestMessage.content.length>50?e.latestMessage.content.substring(0,51)+"...":e.latestMessage.content]})]})]}),!(null===b||void 0===b?void 0:b.isGroupChat)&&(null===b||void 0===b?void 0:b.length)>0&&Object(R.jsx)(r.a,{style:{textAlign:"center"},children:Object(R.jsx)(R.Fragment,{children:b.filter((t=>{var s,a,i,n;return(null===(s=t.sender)||void 0===s?void 0:s._id)===(null===e||void 0===e||null===(a=e.latestMessage)||void 0===a||null===(i=a.sender)||void 0===i?void 0:i._id)&&(null===(n=t.chat)||void 0===n?void 0:n._id)===(null===e||void 0===e?void 0:e._id)})).length>0&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(l.a,{children:_(b.filter((t=>{var s,a,i,n;return(null===(s=t.sender)||void 0===s?void 0:s._id)===(null===e||void 0===e||null===(a=e.latestMessage)||void 0===a||null===(i=a.sender)||void 0===i?void 0:i._id)&&(null===(n=t.chat)||void 0===n?void 0:n._id)===(null===e||void 0===e?void 0:e._id)})).reduce(((e,t)=>t.createdAt>e?t.createdAt:e),""))}),Object(R.jsx)(l.a,{borderRadius:"50%",width:"25px",textAlign:"center",background:"gray",color:"white",height:"25px",children:b.filter((t=>{var s,a,i,n;return(null===(s=t.sender)||void 0===s?void 0:s._id)===(null===e||void 0===e||null===(a=e.latestMessage)||void 0===a||null===(i=a.sender)||void 0===i?void 0:i._id)&&(null===(n=t.chat)||void 0===n?void 0:n._id)===(null===e||void 0===e?void 0:e._id)})).reduce(((e,t)=>e+1),0)})]})})})]})},e._id)))}):Object(R.jsx)(ne,{})})]})},ce=s(285),le=s(294),de=s(275),je=s(276),he=s(274);var be=e=>{let{user:t,children:s}=e;const{isOpen:i,onOpen:n,onClose:o}=Object(h.a)(),[r,c]=Object(a.useState)(!1),[u,p]=Object(a.useState)(t.name),g=Object(j.a)(),[m,f]=Object(a.useState)(null),[v,C]=Object(a.useState)(null),[y,S]=Object(a.useState)(!1),w=JSON.parse(localStorage.getItem("userInfo"));return Object(R.jsxs)(R.Fragment,{children:[s?Object(R.jsx)("span",{onClick:n,children:s}):"",Object(R.jsxs)(D.a,{size:"md",onClose:o,isOpen:i,isCentered:!1,placement:"right",children:[Object(R.jsx)(D.h,{}),Object(R.jsxs)(D.d,{children:[Object(R.jsxs)(D.g,{fontSize:"25px",fontFamily:"Work Sans",d:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"2px solid #ccc",pb:2,children:["Profile",Object(R.jsx)(b.a,{icon:Object(R.jsx)(he.a,{}),onClick:()=>{c(!r)},variant:"ghost",ml:2})]}),Object(R.jsxs)(D.b,{children:[Object(R.jsx)(q.a,{type:"file",onChange:e=>{const t=e.target.files[0];f(t),C(URL.createObjectURL(t))},mb:4,position:"absolute",opacity:"0",zIndex:"-1",left:"0",top:"0",width:"100%",height:"100%",cursor:"pointer",id:"fileInput"}),r&&Object(R.jsx)(b.a,{icon:Object(R.jsx)(he.a,{}),onClick:()=>document.getElementById("fileInput").click(),position:"absolute",variant:"solid",right:140}),Object(R.jsx)(O.a,{borderRadius:"full",boxSize:"200px",src:v||w.pic,alt:"Image Preview",mb:4,mx:"auto",display:"block"}),Object(R.jsxs)(l.a,{fontSize:"16px",fontFamily:"Work Sans",mb:4,children:["Your Name:"," ",r?Object(R.jsxs)(d.a,{align:"center",children:[Object(R.jsx)(q.a,{value:u,onChange:e=>{p(e.target.value)},variant:"flushed"}),Object(R.jsx)(l.a,{fontSize:"14px",color:"gray.500",ml:2,children:u.length})]}):w.name]}),Object(R.jsx)(l.a,{fontSize:"11px",children:"This is not your username or pin. This name will be visible to your ChatApp."})]}),Object(R.jsxs)(D.f,{children:[r&&Object(R.jsx)(x.a,{colorScheme:"teal",mr:3,onClick:async()=>{let e={url:null===t||void 0===t?void 0:t.pic};if("image/jpeg"===(null===m||void 0===m?void 0:m.type)||"image/png"===(null===m||void 0===m?void 0:m.type)||null===m){if(S(!0),null!==m){const t=new FormData;t.append("file",m),t.append("upload_preset","chat-app"),t.append("cloud_name","diixoyqta"),e=await fetch("https://api.cloudinary.com/v1_1/diixoyqta/image/upload",{method:"post",body:t}).then((e=>e.json())).catch((e=>{console.log(e)}))}try{var s;const a={headers:{Authorization:"Bearer ".concat(t.token)}},{data:i}=await F.a.put("/api/user/updateUser",{_id:t._id,name:u,pic:null===(s=e)||void 0===s?void 0:s.url},a);localStorage.setItem("userInfo",JSON.stringify(i)),g({title:"Updated Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),o(),S(!1),c(!1),window.location.reload()}catch(a){g({title:"Error Occured!",description:a.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"})}}else g({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})},isLoading:y,children:"Save"}),Object(R.jsx)(x.a,{onClick:()=>{p(w.name),c(!1),C(null),o()},children:r?"Cancel":"Close"})]})]})]})]})},ue=s(84),pe=s.n(ue);var xe=function(){const[e,t]=Object(a.useState)(""),[s,i]=Object(a.useState)([]),[n,c]=Object(a.useState)(!1),[d,b]=Object(a.useState)(!1),{setSelectedChat:g,user:m,notification:f,setNotification:v,chats:y,setChats:S}=N(),w=Object(j.a)(),{isOpen:_,onOpen:A,onClose:k}=Object(h.a)(),z=Object(o.e)();Object(a.useEffect)((()=>{(async()=>{try{c(!0);const t={headers:{Authorization:"Bearer ".concat(m.token)}},{data:s}=await F.a.get("/api/user?search=".concat(e),t);c(!1),i(s)}catch(t){w({title:"Error Occured!",description:"Failed to Load the Search Results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"})}})()}),[e]);const I=async e=>{try{b(!0);const t={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(m.token)}},{data:s}=await F.a.post("/api/chat",{userId:e},t);y.find((e=>e._id===s._id))||S([s,...y]),g(s),b(!1),k()}catch(t){w({title:"Error fetching the chat",description:t.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-left"})}};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(r.a,{d:"flex",justifyContent:"space-between",alignItems:"center",bg:"white",w:"100%",p:"5px 10px 5px 10px",borderWidth:"5px",children:[Object(R.jsx)(E.a,{label:"Search Users to chat",hasArrow:!0,placement:"bottom-end",children:Object(R.jsxs)(x.a,{variant:"ghost",onClick:A,id:"searchUser",children:[Object(R.jsx)("i",{className:"fas fa-search"}),Object(R.jsx)(l.a,{d:{base:"none",md:"flex"},px:4,children:"Search User"})]})}),Object(R.jsx)("div",{id:"chatApp",children:Object(R.jsxs)(ae.a,{spacing:"2",children:[Object(R.jsx)(O.a,{src:"Favicon.png",alt:"LiveChat Logo",boxSize:"50px"}),Object(R.jsx)(l.a,{fontSize:"4xl",fontWeight:"extrabold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"ChatApp"})]})}),Object(R.jsxs)("div",{children:[Object(R.jsxs)(ce.a,{children:[Object(R.jsx)("div",{id:"notification",style:{display:"inline"},children:Object(R.jsxs)(ce.b,{p:1,children:[Object(R.jsx)(pe.a,{count:f.length,effect:ue.Effect.SCALE}),Object(R.jsx)(de.a,{fontSize:"2xl",m:1})]})}),Object(R.jsxs)(ce.e,{pl:2,children:[!f.length&&"No New Messages",f.map((e=>Object(R.jsx)(ce.d,{onClick:()=>{g(e.chat),v(f.filter((t=>t!==e)))},children:e.chat.isGroupChat?"New Message in ".concat(e.chat.chatName):"New Message from ".concat(C(m,e.chat.users))},e._id)))]})]}),Object(R.jsxs)(ce.a,{children:[Object(R.jsx)("div",{id:"profileDrive",style:{display:"inline"},children:Object(R.jsx)(ce.b,{as:x.a,bg:"white",rightIcon:Object(R.jsx)(je.a,{}),children:Object(R.jsx)(u.a,{size:"sm",cursor:"pointer",name:m.name,src:m.pic})})}),Object(R.jsxs)(ce.e,{children:[Object(R.jsxs)(be,{user:m,children:[Object(R.jsx)(ce.d,{children:"My Profile"})," "]}),Object(R.jsx)(ce.c,{}),Object(R.jsx)(ce.d,{onClick:async()=>{const e={headers:{Authorization:"Bearer ".concat(m.token)}};await F.a.put("/api/user/updateUser",{_id:m._id,isActive:!1,lastSeen:new Date},e),w({title:"Logged Out",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),localStorage.removeItem("userInfo"),z.push("/login")},children:"Logout"})]})]})]})]}),Object(R.jsxs)(le.a,{placement:"left",onClose:k,isOpen:_,children:[Object(R.jsx)(D.h,{}),Object(R.jsxs)(le.b,{children:[Object(R.jsx)(D.g,{borderBottomWidth:"1px",children:"Search Users"}),Object(R.jsxs)(D.b,{children:[Object(R.jsx)(r.a,{d:"flex",pb:2,children:Object(R.jsx)(q.a,{placeholder:"Search by name or email",mr:2,value:e,onChange:e=>t(e.target.value)})}),n?Object(R.jsx)(ne,{}):null===s||void 0===s?void 0:s.map((e=>Object(R.jsx)($,{user:e,handleFunction:()=>I(e._id)},e._id))),d&&Object(R.jsx)(p.a,{ml:"auto",d:"flex"})]})]})]})]})},Oe=(s(236),s(147));var ge=()=>{const[e,t]=Object(a.useState)(!1),{user:s}=N();return Object(a.useEffect)((()=>{1===(null===s||void 0===s?void 0:s.isLogin)&&Object(Oe.a)({steps:[{element:"#searchUser",popover:{title:"Search User",description:"Click here to search for a user and start ChatApp features."}},{element:"#newGroupChat",popover:{title:"Create New Group+",description:"Click here to create a new group and start a chat with multiple users. Enter the group name and select members to initiate a group chat.",side:"right",align:"start"}},{element:"#chatApp",popover:{title:"ChatApp",description:"Stay connected with your contacts, start one-on-one chats, and manage your messages.",side:"right",align:"start"}},{element:"#notification",popover:{title:"Notification Show",description:"Click here to view your notifications. Stay updated on new messages, friend requests, and other important updates.",side:"left",align:"start"}},{element:"#profileDrive",popover:{title:"Profile",description:"Click here to access your profile. Update your personal information, manage settings, and customize your ChatApp experience.",side:"bottom",align:"start"}},{popover:{title:"'Happy Chatting!'",description:"'Happy Chatting!' to send a friendly message in the ChatApp."}}],allowClose:!0}).drive()}),[]),Object(R.jsxs)("div",{style:{width:"100%"},children:[s&&Object(R.jsx)(xe,{}),Object(R.jsxs)(r.a,{d:"flex",justifyContent:"space-between",w:"100%",h:"91.5vh",p:"10px",children:[s&&Object(R.jsx)(re,{fetchAgain:e}),s&&Object(R.jsx)(te,{fetchAgain:e,setFetchAgain:t})]})]})},me=s(278),fe=s(279),ve=s(280),Ce=s(277);var ye=()=>{const[e,t]=Object(a.useState)(!1),s=Object(j.a)(),[i,n]=Object(a.useState)(),[d,h]=Object(a.useState)(),[b,u]=Object(a.useState)(!1),p=Object(o.e)(),{setUser:g}=N();return Object(R.jsxs)(Ce.a,{maxW:"xl",centerContent:!0,children:[Object(R.jsx)(r.a,{d:"flex",justifyContent:"center",p:3,bg:"white",w:"100%",m:"40px 0 15px 0",borderRadius:"lg",borderWidth:"1px",children:Object(R.jsxs)(ae.a,{spacing:"2",children:[Object(R.jsx)(O.a,{src:"Favicon.png",alt:"LiveChat Logo",boxSize:"50px"}),Object(R.jsx)(l.a,{fontSize:"4xl",fontWeight:"extrabold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"ChatApp"})]})}),Object(R.jsxs)(r.a,{bg:"white",w:"100%",p:4,borderRadius:"lg",borderWidth:"1px",children:[Object(R.jsxs)(ae.c,{spacing:"10px",children:[Object(R.jsxs)(c.a,{id:"email",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Email Address"}),Object(R.jsx)(q.a,{value:i,type:"email",placeholder:"Enter Your Email Address",onChange:e=>n(e.target.value)})]}),Object(R.jsxs)(c.a,{id:"password",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Password"}),Object(R.jsxs)(fe.a,{size:"md",children:[Object(R.jsx)(q.a,{value:d,onChange:e=>h(e.target.value),type:e?"text":"password",placeholder:"Enter password"}),Object(R.jsx)(ve.a,{width:"4.5rem",children:Object(R.jsx)(x.a,{h:"1.75rem",size:"sm",onClick:()=>t(!e),children:e?"Hide":"Show"})})]})]}),Object(R.jsx)(x.a,{colorScheme:"blue",width:"100%",style:{marginTop:15},onClick:async()=>{if(u(!0),!i||!d)return s({title:"Please Fill all the Feilds",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void u(!1);try{const e={headers:{"Content-type":"application/json"}},{data:t}=await F.a.post("/api/user/login",{email:i,password:d},e);s({title:"Login Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),g(t),localStorage.setItem("userInfo",JSON.stringify(t)),u(!1),p.push("/chats")}catch(e){s({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),u(!1)}},isLoading:b,children:"Login"})]}),Object(R.jsxs)(l.a,{textAlign:"center",children:["You have no registered yet?"," ",Object(R.jsx)("span",{style:{color:"#32ccfe",cursor:"pointer",textDecorationLine:"underline"},onClick:()=>{p.push("signup")},children:"Register"})]})]})]})},Se=s(281);var we=()=>{const[e,t]=Object(a.useState)(!1),s=()=>t(!e),i=Object(j.a)(),n=Object(o.e)(),[d,h]=Object(a.useState)(!1),[b,u]=Object(a.useState)(),[p,g]=Object(a.useState)(),[m,f]=Object(a.useState)(),[v,C]=Object(a.useState)(),[y,S]=Object(a.useState)(),[w,_]=Object(a.useState)(),[A,k]=Object(a.useState)(),[z,I]=Object(a.useState)(null),[E,L]=Object(a.useState)(!1),[W,N]=Object(a.useState)(120),P=Object(a.useRef)(null),D=()=>{C("842093"),clearInterval(P.current),N(60)};Object(a.useEffect)((()=>()=>clearInterval(P.current)),[]);const M={headers:{"Content-type":"application/json"}},U=(()=>{const e=1e5,t=Math.floor(9e5*Math.random())+e;return String(t)})(),B=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;Object(a.useEffect)((()=>{6===(null===m||void 0===m?void 0:m.length)&&m===v?I(Object(R.jsx)(Se.a,{})):(null===m||void 0===m?void 0:m.length)>=6?I(Object(R.jsx)(J.a,{})):I(null)}),[m||v]);return Object(R.jsxs)(Ce.a,{maxW:"xl",centerContent:!0,children:[Object(R.jsx)(r.a,{d:"flex",justifyContent:"center",p:3,bg:"white",w:"100%",m:"40px 0 15px 0",borderRadius:"lg",borderWidth:"1px",children:Object(R.jsxs)(ae.a,{spacing:"2",children:[Object(R.jsx)(O.a,{src:"Favicon.png",alt:"LiveChat Logo",boxSize:"50px"}),Object(R.jsx)(l.a,{fontSize:"4xl",fontWeight:"extrabold",pb:3,fontFamily:"Work Sans",color:"#32ccfe",children:"ChatApp"})]})}),Object(R.jsxs)(r.a,{bg:"white",w:"100%",p:4,borderRadius:"lg",borderWidth:"1px",children:[Object(R.jsxs)(ae.c,{spacing:"5px",children:[Object(R.jsxs)(c.a,{id:"first-name",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Name"}),Object(R.jsx)(q.a,{placeholder:"Enter Your Name",onChange:e=>u(e.target.value)})]}),Object(R.jsxs)(c.a,{id:"email",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Email Address"}),Object(R.jsxs)(fe.a,{size:"md",children:[Object(R.jsx)(q.a,{type:"email",placeholder:"Enter Your Email Address",onChange:e=>g(e.target.value),isDisabled:W<60}),Object(R.jsx)(ve.a,{width:"5.5rem",children:Object(R.jsx)(x.a,{h:"1.75rem",size:"sm",mr:"0.5rem",onClick:async()=>{if(b&&p)if(B.test(p)){h(!0),C(U);try{const{data:e}=await F.a.post("/api/OTP/sendOTP",{name:b,email:p,otp:U},M);!0===e.success?(i({title:"Email sent successfully",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),P.current=setInterval((()=>{N((e=>e>0?e-1:(D(),0)))}),1e3)):i({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),h(!1)}catch(e){i({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),h(!1)}}else i({title:"Invalid Email",status:"warning",duration:5e3,isClosable:!0,position:"bottom"});else i({title:"Please Fill Name Field and email",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})},isLoading:d,isDisabled:W<60,children:W<60?"Resend OTP in ".concat(W,"s"):"Send OTP"})})]})]}),Object(R.jsxs)(c.a,{id:"otp",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Enter OTP"}),Object(R.jsxs)(fe.a,{size:"md",children:[Object(R.jsx)(q.a,{type:"text",placeholder:"Enter the OTP",onChange:e=>f(e.target.value)}),null!==z&&Object(R.jsx)(ve.a,{width:"4.5rem",children:Object(R.jsx)(x.a,{h:"1.75rem",size:"sm",color:m===v?"green":"red",children:z})})]})]}),Object(R.jsxs)(c.a,{id:"password",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Password"}),Object(R.jsxs)(fe.a,{size:"md",children:[Object(R.jsx)(q.a,{type:e?"text":"password",placeholder:"Enter Password",onChange:e=>_(e.target.value)}),Object(R.jsx)(ve.a,{width:"4.5rem",children:Object(R.jsx)(x.a,{h:"1.75rem",size:"sm",onClick:s,children:e?"Hide":"Show"})})]})]}),Object(R.jsxs)(c.a,{id:"password",isRequired:!0,children:[Object(R.jsx)(me.a,{children:"Confirm Password"}),Object(R.jsxs)(fe.a,{size:"md",children:[Object(R.jsx)(q.a,{type:e?"text":"password",placeholder:"Confirm password",onChange:e=>S(e.target.value)}),Object(R.jsx)(ve.a,{width:"4.5rem",children:Object(R.jsx)(x.a,{h:"1.75rem",size:"sm",onClick:s,children:e?"Hide":"Show"})})]})]}),Object(R.jsxs)(c.a,{id:"pic",children:[Object(R.jsx)(me.a,{children:"Upload your Picture"}),Object(R.jsx)(q.a,{type:"file",p:1.5,accept:"image/*",onChange:e=>(e=>{if(L(!0),void 0!==e){if("image/jpeg"!==e.type&&"image/png"!==e.type)return i({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void L(!1);{const t=new FormData;t.append("file",e),t.append("upload_preset","chat-app"),t.append("cloud_name","diixoyqta"),fetch("https://api.cloudinary.com/v1_1/diixoyqta/image/upload",{method:"post",body:t}).then((e=>e.json())).then((e=>{k(e.url.toString()),L(!1)})).catch((e=>{console.log(e),L(!1)}))}}else i({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})})(e.target.files[0])})]}),Object(R.jsx)(x.a,{colorScheme:"blue",width:"100%",style:{marginTop:15},onClick:async()=>{if(L(!0),!(b&&p&&w&&y&&m))return i({title:"Please Fill all the Feilds",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void L(!1);if(!B.test(p))return i({title:"Invalid Email",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void L(!1);if(w!==y)return i({title:"Passwords Do Not Match",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void L(!1);if(m!==v)return i({title:"Please Enter the correct OTP",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void L(!1);try{const{data:e}=await F.a.post("/api/user",{name:b,email:p,password:w,pic:A},M);N("120"),i({title:"Registration Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),localStorage.setItem("userInfo",JSON.stringify(e)),L(!1),n.push("/login")}catch(e){i({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),L(!1)}},isLoading:E,children:"Sign Up"})]}),Object(R.jsxs)(l.a,{textAlign:"center",children:["You have Already Registered?"," ",Object(R.jsx)("span",{style:{color:"#32ccfe",cursor:"pointer",textDecorationLine:"underline"},onClick:()=>{n.push("/login")},children:"Login"})]})]})]})};var _e=function(){return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(o.a,{path:"/login",component:ye,exact:!0}),Object(R.jsx)(o.a,{path:"/signup",component:we,exact:!0}),Object(R.jsx)(o.a,{path:"/chats",component:ge})]})};var Ae=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,295)).then((t=>{let{getCLS:s,getFID:a,getFCP:i,getLCP:n,getTTFB:o}=t;s(e),a(e),i(e),n(e),o(e)}))},ke=s(286),Fe=s(62);n.a.render(Object(R.jsx)(ke.a,{children:Object(R.jsx)(Fe.a,{children:Object(R.jsx)(P,{children:Object(R.jsx)(_e,{})})})}),document.getElementById("root")),Ae()}},[[237,1,2]]]);
//# sourceMappingURL=main.de0214bd.chunk.js.map